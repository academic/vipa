{% extends 'APYDataGridBundle::blocks_js.jquery.html.twig' %}

{% block grid %}
    <div class="grid">
        {% if grid.totalCount > 0 or grid.isFiltered or grid.noDataMessage is sameas(false) %}
            <form id="{{ grid.hash }}" action="{{ grid.routeUrl }}" method="post">
                <div class="grid_header">
                    {% if grid.massActions|length > 0 %}
                        {{ grid_actions(grid) }}
                    {% endif %}
                </div>
                {% if grid.isFilterSectionVisible %}
                    {{ grid_filters(grid) }}
                {% endif %}
                <div class="grid_body">
                    <table class="table table-bordered">
                        {% if grid.isTitleSectionVisible %}
                            {{ grid_titles(grid) }}
                        {% endif %}

                        {{ grid_rows(grid) }}
                    </table>
                </div>
                <div class="grid_footer">
                    {% if grid.isPagerSectionVisible %}
                        {{ grid_pager(grid) }}
                    {% endif %}
                    {% if grid.exports|length > 0 %}
                        {{ grid_exports(grid) }}
                    {% endif %}
                    {% if grid.tweaks|length > 0 %}
                        {{ grid_tweaks(grid) }}
                    {% endif %}
                </div>
                {% if withjs %}
                    {{ grid_scripts(grid) }}
                {% endif %}
            </form>
        {% else %}
            {{ grid_no_data(grid) }}
        {% endif %}
    </div>
{% endblock grid %}
{% block grid_no_data %}<p
        class="alert alert-warning">{{ grid.noDataMessage|default('No data')|trans|raw }}</p>{% endblock grid_no_data %}

{% block grid_column_actions_cell %}
    {% set actions = column.getActionsToRender(row) %}
    <ul class="grid-row-actions">
        {% for action in actions %}
            <li>
                <a href="{{ url(action.route, column.routeParameters(row, action), false) }}"
                   target="{{ action.target }}"{% if action.confirm %}
                   onclick="return confirm('{{ action.confirmMessage }}')"{% endif %}{% for name, value in action.attributes %} {{ name }}="{{ value }}" {% endfor %}
                >{{ action.title|trans|raw }}</a>
            </li>
        {% endfor %}
    </ul>
{% endblock grid_column_actions_cell %}

{% block grid_filters %}
    <div class="grid-row-filters">
        <div class="hide" id="filters">
            {% for column in grid.columns %}
                {% if column.visible(grid.isReadyForExport) %}
                    <div class="{% if column.class %}{{ column.class }}{% endif %}{% if loop.last %} last-column{% endif %}"
                            {% if(column.size > -1) %} style="width:{{ column.size }}px;"{% endif %}>
                        {% if column.filterable %}{{ grid_filter(column, grid)|raw }}{% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <a class="btn btn-info pull-right" href="#" id="show-filter">
            {{ 'Filter'|trans }}
        </a>
        <div class="clearfix"></div>
    </div>
{% endblock grid_filters %}

{% block grid_scripts %}
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
   {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function(){
           $("#show-filter").on('click',function(){
               $("#filters").slideToggle();
               console.log(1);
           });
        });
    </script>
{% endblock grid_scripts %}